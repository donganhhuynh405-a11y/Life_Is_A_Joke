# –†–µ—à–µ–Ω–∏–µ –≤–∞—à–µ–π –ø—Ä–æ–±–ª–µ–º—ã —Å Beget

## –ß—Ç–æ –≤—ã –ø—ã—Ç–∞–ª–∏—Å—å —Å–¥–µ–ª–∞—Ç—å

–í—ã –ø—ã—Ç–∞–ª–∏—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É—è –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 1

```bash
--target-host ftp.ru1.storage.beget.cloud
```

**–û—à–∏–±–∫–∞:** `Connection refused`

**–ü—Ä–∏—á–∏–Ω–∞:** –≠—Ç–æ FTP endpoint –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â—É, –ù–ï PostgreSQL —Å–µ—Ä–≤–µ—Ä.

### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 2

```bash
--target-host https://s3.ru1.storage.beget.cloud/443c60e2203e-betacassiopeiae
```

**–û—à–∏–±–∫–∞:** `Name or service not known`

**–ü—Ä–∏—á–∏–Ω–∞:** –≠—Ç–æ –ø–æ–ª–Ω—ã–π URL S3 bucket'–∞, –≤–∫–ª—é—á–∞—è –ø—Ä–æ—Ç–æ–∫–æ–ª –∏ –ø—É—Ç—å. PostgreSQL –æ–∂–∏–¥–∞–µ—Ç hostname –±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

### ‚ùå –ü–æ–ø—ã—Ç–∫–∞ 3

```bash
--target-host s3.ru1.storage.beget.cloud/443c60e2203e-betacassiopeiae
```

**–û—à–∏–±–∫–∞:** `Name or service not known`

**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ S3. –≠—Ç–æ –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –Ω–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö!

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∞—à –∞–¥—Ä–µ—Å

`s3.ru1.storage.beget.cloud/443c60e2203e-betacassiopeiae` - —ç—Ç–æ:

- **S3 endpoint:** `s3.ru1.storage.beget.cloud`
- **Bucket name:** `443c60e2203e-betacassiopeiae`
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** HTTP/HTTPS (–ø–æ—Ä—Ç 443)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –§–ê–ô–õ–û–í (–Ω–µ SQL –¥–∞–Ω–Ω—ã—Ö)

### –ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
PostgreSQL –æ–∂–∏–¥–∞–µ—Ç:
  Host: database-server.com
  Port: 5432
  Protocol: PostgreSQL

S3 –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
  Host: s3.ru1.storage.beget.cloud
  Port: 443
  Protocol: HTTP/HTTPS

–≠–¢–û –†–ê–ó–ù–´–ï –ü–†–û–¢–û–ö–û–õ–´!
```

–≠—Ç–æ –∫–∞–∫ –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–∑–≤–æ–Ω–∏—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å S3 –¥–ª—è backup'–æ–≤

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å S3! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –¥–ª—è backup'–æ–≤:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å backup
python3 scripts/backup_to_beget_s3.py \
  --db /var/lib/trading-bot/trading_bot.db \
  --bucket 443c60e2203e-betacassiopeiae \
  --endpoint s3.ru1.storage.beget.cloud \
  --access-key –í–ê–®_–ö–õ–Æ–ß \
  --secret-key –í–ê–®_–°–ï–ö–†–ï–¢

# 2. Backup —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ S3!
# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup'—ã
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –î–µ—à–µ–≤–æ (~50‚ÇΩ/–º–µ—Å—è—Ü)
- ‚úÖ –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å
- ‚úÖ –°–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã
- ‚ùå –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å S3

### –†–µ—à–µ–Ω–∏–µ 2: –ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å PostgreSQL

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:

**–®–∞–≥ 1:** –ó–∞–π—Ç–∏ –Ω–∞ https://cp.beget.com

**–®–∞–≥ 2:** –†–∞–∑–¥–µ–ª "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" ‚Üí "PostgreSQL" ‚Üí "–°–æ–∑–¥–∞—Ç—å"

**–®–∞–≥ 3:** –í—ã–±—Ä–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- –¢–∞—Ä–∏—Ñ: –æ—Ç 150‚ÇΩ/–º–µ—Å—è—Ü
- –ò–º—è –ë–î: trading_bot
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: bot_user

**–®–∞–≥ 4:** –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
Host: pg-12345.beget.tech  ‚Üê –≠—Ç–æ –î–†–£–ì–û–ô –∞–¥—Ä–µ—Å!
Port: 5432
Database: trading_bot
User: bot_user
Password: –≤–∞—à_–ø–∞—Ä–æ–ª—å
```

**–®–∞–≥ 5:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ:
```bash
python3 scripts/migrate_db_direct.py \
  --source-db /var/lib/trading-bot/trading_bot.db \
  --target-type postgresql \
  --target-host pg-12345.beget.tech \  ‚Üê –ü–†–ê–í–ò–õ–¨–ù–´–ô –∞–¥—Ä–µ—Å!
  --target-database trading_bot \
  --target-user bot_user \
  --target-password "–≤–∞—à_–ø–∞—Ä–æ–ª—å"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è SQL –ë–î
- ‚úÖ –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ Backup'—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –°—Ç–æ–∏—Ç –¥–µ–Ω–µ–≥ (~150‚ÇΩ/–º–µ—Å—è—Ü)
- ‚ùå –ù—É–∂–Ω–æ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

### –†–µ—à–µ–Ω–∏–µ 3: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**PostgreSQL (Beget):** –î–ª—è —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- Host: pg-XXXXX.beget.tech
- –î–ª—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
- ~150‚ÇΩ/–º–µ—Å—è—Ü

**S3 (Beget):** –î–ª—è backup'–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π
- Bucket: 443c60e2203e-betacassiopeiae
- –î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ~50‚ÇΩ/–º–µ—Å—è—Ü

**–ò—Ç–æ–≥–æ:** ~200‚ÇΩ/–º–µ—Å—è—Ü –∑–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

## ÔøΩÔøΩ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –≤–∞—Å

### –ï—Å–ª–∏ –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ë–î:
‚Üí –ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å PostgreSQL + –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å S3 –¥–ª—è backup'–æ–≤

### –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:
‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ S3 –¥–ª—è backup'–æ–≤

### –ï—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã:
‚Üí –ù–∞—á–∞—Ç—å —Å S3 backup'–æ–≤ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –≤–∞—Å, —É–∂–µ –µ—Å—Ç—å)
‚Üí –ü–æ–∑–∂–µ –¥–æ–±–∞–≤–∏—Ç—å PostgreSQL –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `BEGET_–ö–†–ê–¢–ö–û–ï_–û–ë–™–Ø–°–ù–ï–ù–ò–ï.md` - –∫—Ä–∞—Ç–∫–∞—è –≤—ã–∂–∏–º–∫–∞
- `S3_vs_PostgreSQL_EXPLAINED.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω–∏—Ü—ã
- `BEGET_S3_INTEGRATION.md` - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å S3
- `BEGET_POSTGRESQL_GUIDE.md` - –∫–∞–∫ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å PostgreSQL
- `scripts/backup_to_beget_s3.py` - –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è backup'–∞

## ‚úÖ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ `BEGET_–ö–†–ê–¢–ö–û–ï_–û–ë–™–Ø–°–ù–ï–ù–ò–ï.md`
2. –†–µ—à–∏—Ç–µ —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ (backup –∏–ª–∏ –ø–æ–ª–Ω–∞—è –ë–î)
3. –°–ª–µ–¥—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
4. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å!
